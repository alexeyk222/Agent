<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InnerQuest: –ì–æ—Ä–æ–¥ –°—Ñ–µ—Ä</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="loading-screen" class="screen active">
        <div class="loading-content">
            <h1 class="game-title">InnerQuest</h1>
            <h2 class="game-subtitle">–ì–æ—Ä–æ–¥ –°—Ñ–µ—Ä</h2>
            <div class="loading-animation">
                <div class="city-silhouette"></div>
                <div class="fog-layer"></div>
            </div>
            <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ä–æ–¥–∞...</p>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–∞ –≥–æ—Ä–æ–¥–∞ -->
    <div id="city-map" class="screen">
        <div class="city-container">
            <h1 class="city-title">–ì–æ—Ä–æ–¥ –°—Ñ–µ—Ä</h1>
            <div class="city-grid">
                <!-- –û–∞–∑–∏—Å (–ó–¥–æ—Ä–æ–≤—å–µ) -->
                <div class="district" data-district="oasis" data-theme="health">
                    <div class="district-icon">üåø</div>
                    <div class="district-name">–û–∞–∑–∏—Å</div>
                    <div class="district-level">–£—Ä–æ–≤–µ–Ω—å <span class="level-value">0</span></div>
                    <div class="district-status locked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</div>
                </div>

                <!-- –§–æ—Ä—É–º (–û—Ç–Ω–æ—à–µ–Ω–∏—è) -->
                <div class="district" data-district="forum" data-theme="relationships">
                    <div class="district-icon">ü§ù</div>
                    <div class="district-name">–§–æ—Ä—É–º</div>
                    <div class="district-level">–£—Ä–æ–≤–µ–Ω—å <span class="level-value">0</span></div>
                    <div class="district-status locked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</div>
                </div>

                <!-- –¶–∏—Ç–∞–¥–µ–ª—å (–†–∞–±–æ—Ç–∞) -->
                <div class="district" data-district="citadel" data-theme="work">
                    <div class="district-icon">üèõÔ∏è</div>
                    <div class="district-name">–¶–∏—Ç–∞–¥–µ–ª—å</div>
                    <div class="district-level">–£—Ä–æ–≤–µ–Ω—å <span class="level-value">0</span></div>
                    <div class="district-status">–î–æ—Å—Ç—É–ø–µ–Ω</div>
                </div>

                <!-- –ê—Ä—Å–µ–Ω–∞–ª (–§–∏–Ω–∞–Ω—Å—ã) -->
                <div class="district" data-district="arsenal" data-theme="finance">
                    <div class="district-icon">‚öîÔ∏è</div>
                    <div class="district-name">–ê—Ä—Å–µ–Ω–∞–ª</div>
                    <div class="district-level">–£—Ä–æ–≤–µ–Ω—å <span class="level-value">0</span></div>
                    <div class="district-status">–î–æ—Å—Ç—É–ø–µ–Ω</div>
                </div>

                <!-- –°–∞–¥ (–õ–∏—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ) -->
                <div class="district" data-district="garden" data-theme="personal">
                    <div class="district-icon">üå±</div>
                    <div class="district-name">–°–∞–¥</div>
                    <div class="district-level">–£—Ä–æ–≤–µ–Ω—å <span class="level-value">0</span></div>
                    <div class="district-status">–î–æ—Å—Ç—É–ø–µ–Ω</div>
                </div>
            </div>

            <div class="city-stats">
                <div class="stat-item">
                    <span class="stat-label">–û—á–∫–∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏:</span>
                    <span class="stat-value" id="stability-points">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è:</span>
                    <span class="stat-value" id="last-session">–ù–∏–∫–æ–≥–¥–∞</span>
                </div>
            </div>

            <div class="city-actions">
                <button class="btn btn-primary" id="start-session-btn">–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
                <button class="btn btn-secondary" id="open-diary-btn">–î–Ω–µ–≤–Ω–∏–∫</button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —ç–º–æ—Ü–∏–∏ -->
    <div id="emotion-select" class="screen">
        <div class="emotion-container">
            <h2>–í—ã–±–µ—Ä–∏ —ç–º–æ—Ü–∏—é</h2>
            <p class="emotion-subtitle">–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å –≤ —ç—Ç–æ–º –∫–≤–∞—Ä—Ç–∞–ª–µ?</p>
            
            <div class="emotion-list">
                <div class="emotion-item" data-emotion="–¢—Ä–µ–≤–æ–≥–∞">
                    <span class="emotion-icon">üò∞</span>
                    <span class="emotion-name">–¢—Ä–µ–≤–æ–≥–∞</span>
                </div>
                <div class="emotion-item" data-emotion="–í—ã–≥–æ—Ä–∞–Ω–∏–µ">
                    <span class="emotion-icon">üòì</span>
                    <span class="emotion-name">–í—ã–≥–æ—Ä–∞–Ω–∏–µ</span>
                </div>
                <div class="emotion-item" data-emotion="–ê–ø–∞—Ç–∏—è">
                    <span class="emotion-icon">üòë</span>
                    <span class="emotion-name">–ê–ø–∞—Ç–∏—è</span>
                </div>
                <div class="emotion-item" data-emotion="–ê–∑–∞—Ä—Ç">
                    <span class="emotion-icon">üòä</span>
                    <span class="emotion-name">–ê–∑–∞—Ä—Ç</span>
                </div>
                <div class="emotion-item" data-emotion="–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ">
                    <span class="emotion-icon">üòå</span>
                    <span class="emotion-name">–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ</span>
                </div>
                <div class="emotion-item" data-emotion="–†–∞–¥–æ—Å—Ç—å">
                    <span class="emotion-icon">üòÑ</span>
                    <span class="emotion-name">–†–∞–¥–æ—Å—Ç—å</span>
                </div>
            </div>

            <div class="intensity-selector">
                <label>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å (1-10):</label>
                <input type="range" id="intensity-slider" min="1" max="10" value="5">
                <span id="intensity-value">5</span>
            </div>

            <div class="emotion-actions">
                <button class="btn btn-secondary" id="back-to-city-btn">–ù–∞–∑–∞–¥</button>
                <button class="btn btn-primary" id="confirm-emotion-btn" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –î–∏–∞–ª–æ–≥ —Å –∞–≥–µ–Ω—Ç–æ–º -->
    <div id="agent-dialog" class="screen">
        <div class="dialog-layout">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ê–π—Ä–∞, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –ø—Ä–∞–≤–∏–ª–∞, –∫–æ–Ω—Ü–µ–ø—Ç -->
            <aside class="agent-side">
                <div class="agent-photo-wrap">
                    <div class="agent-photo" role="img" aria-label="–ê–π—Ä–∞">
                        <div class="agent-photo-overlay"></div>
                    </div>
                    <div class="agent-name large">–ê–π—Ä–∞ ‚Äî –ù–∞–≤–∏–≥–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–∞</div>
                </div>
                <div class="agent-greeting-card">
                    <h3>–ü—Ä–∏–≤–µ—Ç!</h3>
                    <p>–Ø –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–≥–Ω–∞—Ç—å —Ç—É–º–∞–Ω, –Ω–∞–π—Ç–∏ –æ–ø–æ—Ä—ã –∏ —Å–≤—è–∑–∞—Ç—å –∫–≤–∞—Ä—Ç–∞–ª—ã —Ç–≤–æ–µ–≥–æ –ì–æ—Ä–æ–¥–∞ –°—Ñ–µ—Ä.</p>
                </div>
                <div class="agent-rules-card">
                    <h4>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h4>
                    <ul>
                        <li>–í—ã–±–µ—Ä–∏ –∫–≤–∞—Ä—Ç–∞–ª –∏ —ç–º–æ—Ü–∏—é, –æ–ø–∏—à–∏ –º–∏–∫—Ä–æ—à–∞–≥ ‚Äî –ø–æ–ª—É—á–∞–π Effort.</li>
                        <li>–û—Ç–∫—Ä—ã–≤–∞–π –∫–∞—Ä—Ç—ã (Skill/Relic/Contract/Lore/Companion/Hazard) —Ä—è–¥–æ–º —Å —á–∞—Ç–æ–º.</li>
                        <li>–†–∞–∑—ã–≥—Ä—ã–≤–∞–π –∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ä—Ç—É drag&drop –≤ —á–∞—Ç, —Å–æ–±–∏—Ä–∞–π –ö–æ–¥–µ–∫—Å.</li>
                        <li>–ü—Ä–æ—Ö–æ–¥–∏ –∞–∫—Ç—ã I‚ÄìV, –≤—Å—Ç—Ä–µ—á–∞–π –±–æ—Å—Å–æ–≤ –®–µ–ø–æ—Ç–∞, –°—á—ë—Ç–æ–≤–æ–¥–∞, –ö–æ–ª–ª–µ–∫—Ç–æ—Ä–∞, –ö–æ–º–º–µ–Ω—Ç–∞—Ç–æ—Ä–∞ –∏ –ê—Ä—Ö–∏–≤–∞—Ä–∏—É—Å–∞.</li>
                    </ul>
                </div>
                <div class="agent-concept-card">
                    <h4>–ö–æ–Ω—Ü–µ–ø—Ü–∏—è</h4>
                    <p>–ì–æ—Ä–æ–¥ –°—Ñ–µ—Ä ‚Äî —ç—Ç–æ —Ç–≤–æ—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –ê–π—Ä–∞ ‚Äî –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã, —É–¥–µ—Ä–∂–∞—Ç—å –±–∞–ª–∞–Ω—Å –∫–≤–∞—Ä—Ç–∞–ª–æ–≤ –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —à—É–º –≤ –ø–æ–Ω—è—Ç–Ω—ã–µ —É–∑–æ—Ä—ã.</p>
                </div>
            </aside>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: —á–∞—Ç -->
            <div class="dialog-container">
                <div class="agent-avatar">
                    <div class="avatar-glow"></div>
                    <div class="avatar-silhouette">A</div>
                </div>
                <div class="agent-name">–ê–π—Ä–∞</div>
                
                <div class="dialog-messages" id="dialog-messages">
                    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>

                <div class="dialog-input-container">
                    <textarea 
                        id="dialog-input" 
                        placeholder="–ù–∞–ø–∏—à–∏ –ê–π—Ä–µ..."
                        rows="3"
                    ></textarea>
                    <button class="btn btn-primary" id="send-message-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>

                <div class="dialog-actions">
                    <button class="btn btn-secondary" id="skip-dialog-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–ª–æ–≥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–∏–Ω–∏-–∏–≥—Ä–∞: –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã -->
    <div id="sphere-minigame" class="screen">
        <div class="minigame-container">
            <h2>–ù–∞–π–¥–∏ –æ–ø–æ—Ä—É</h2>
            <p class="minigame-instruction">
                –í—Å–ø–æ–º–Ω–∏ –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–µ–≥–æ–¥–Ω—è –ø—Ä–∏–Ω–µ—Å–ª–æ —Ç–µ–±–µ –∫–æ–º—Ñ–æ—Ä—Ç.
                –í–≤–µ–¥–∏ –µ–≥–æ –Ω–∏–∂–µ, –∏ –æ–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—Å—è –≤ —Å—Ñ–µ—Ä—É.
            </p>
            
            <div class="sphere-input-container">
                <input type="text" id="sphere-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≤—ã–ø–∏–ª –≤–∫—É—Å–Ω—ã–π –∫–æ—Ñ–µ –≤ —Ç–∏—à–∏–Ω–µ">
                <button class="btn btn-primary" id="create-sphere-btn">–°–æ–∑–¥–∞—Ç—å —Å—Ñ–µ—Ä—É</button>
            </div>

            <div class="sphere-game-area">
                <div class="sphere-source" id="sphere-source"></div>
                <div class="sphere-target" id="sphere-target">
                    <div class="target-label">–ü–µ—Ä–µ—Ç–∞—â–∏ —Å—Ñ–µ—Ä—É —Å—é–¥–∞</div>
                </div>
            </div>

            <div class="minigame-actions">
                <button class="btn btn-secondary" id="skip-sphere-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–∏–Ω–∏-–∏–≥—Ä–∞: –î—ã—Ö–∞–Ω–∏–µ -->
    <div id="breathing-minigame" class="screen">
        <div class="minigame-container">
            <h2>–î—ã—Ö–∞–Ω–∏–µ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏</h2>
            <p class="minigame-instruction">
                –î—ã—à–∏ –≤ —Ç–∞–∫—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º —É–∑–æ—Ä–∞.
                –í–¥–æ—Ö (4 —Å–µ–∫) ‚Üí –ó–∞–¥–µ—Ä–∂–∫–∞ (4 —Å–µ–∫) ‚Üí –í—ã–¥–æ—Ö (4 —Å–µ–∫)
            </p>
            
            <div class="breathing-circle-container">
                <div class="breathing-circle" id="breathing-circle">
                    <div class="breathing-pattern"></div>
                </div>
                <div class="breathing-instruction" id="breathing-instruction">–í–¥–æ—Ö</div>
            </div>

            <div class="breathing-timer">
                <div class="timer-bar" id="timer-bar"></div>
            </div>

            <div class="breathing-counter">
                –¶–∏–∫–ª–æ–≤: <span id="breathing-count">0</span> / 3
            </div>

            <div class="minigame-actions">
                <button class="btn btn-secondary" id="skip-breathing-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div id="results-screen" class="screen">
        <div class="results-container">
            <h2>–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞</h2>
            
            <div class="results-stats">
                <div class="result-item">
                    <div class="result-icon">‚ú®</div>
                    <div class="result-label">–û—á–∫–∏ –ø–æ–ª—É—á–µ–Ω–æ</div>
                    <div class="result-value" id="points-earned">+15</div>
                </div>
                <div class="result-item">
                    <div class="result-icon">üèÜ</div>
                    <div class="result-label">–í—Å–µ–≥–æ –æ—á–∫–æ–≤</div>
                    <div class="result-value" id="total-points">15</div>
                </div>
                <div class="result-item">
                    <div class="result-icon">üìà</div>
                    <div class="result-label">–£—Ä–æ–≤–µ–Ω—å –∫–≤–∞—Ä—Ç–∞–ª–∞</div>
                    <div class="result-value" id="district-level">1</div>
                </div>
            </div>

            <div class="results-message" id="results-message">
                –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –¢—ã —Å–¥–µ–ª–∞–ª –≤–∞–∂–Ω—ã–π —à–∞–≥.
            </div>

            <div class="results-actions">
                <button class="btn btn-primary" id="back-to-city-from-results">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–æ—Ä–æ–¥</button>
            </div>
        </div>
    </div>

    <!-- –î–Ω–µ–≤–Ω–∏–∫ -->
    <div id="diary-screen" class="screen">
        <div class="diary-container">
            <h2>–î–Ω–µ–≤–Ω–∏–∫</h2>
            
            <div class="diary-tabs">
                <button class="tab-btn active" data-tab="history">–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π</button>
                <button class="tab-btn" data-tab="memory">–ü–∞–º—è—Ç—å –ê–≥–µ–Ω—Ç–∞</button>
                <button class="tab-btn" data-tab="achievements">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
            </div>

            <div class="diary-content">
                <div class="tab-content active" id="tab-history">
                    <div id="session-history-list"></div>
                </div>
                <div class="tab-content" id="tab-memory">
                    <div id="agent-memory-list"></div>
                </div>
                <div class="tab-content" id="tab-achievements">
                    <div id="achievements-list"></div>
                </div>
            </div>

            <div class="diary-actions">
                <button class="btn btn-secondary" id="close-diary-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ö—Ä–∏–∑–∏—Å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="crisis-screen" class="screen">
        <div class="crisis-container">
            <h2>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="crisis-message" id="crisis-message"></div>
            <div class="helplines-list" id="helplines-list"></div>
            <div class="crisis-actions">
                <button class="btn btn-primary" id="crisis-understood-btn">–ü–æ–Ω—è—Ç–Ω–æ</button>
            </div>
        </div>
    </div>

    <!-- Card Rail (—Ä–µ–π–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫) -->
    <div id="card-rail"></div>

    <!-- –≠–∫—Ä–∞–Ω –±–∏–Ω–∞—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ -->
    <div id="questions-screen" class="screen">
        <div id="question-container"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π -->
    <div id="task-screen" class="screen">
        <div id="task-container"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –±–æ—Å—Å–∞ -->
    <div id="boss-encounter" class="screen">
        <div id="boss-container"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ì–£–†–£-—Ä–µ–∂–∏–º–∞ -->
    <div id="guru-mode" class="screen">
        <div id="guru-container"></div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/questions.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cards.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tasks.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bosses.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/guru.css') }}">

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript -->
    <script src="{{ url_for('static', filename='js/game.js') }}"></script>
    <script src="{{ url_for('static', filename='js/city.js') }}"></script>
    <script src="{{ url_for('static', filename='js/minigames.js') }}"></script>
    <script src="{{ url_for('static', filename='js/agent.js') }}"></script>
    <script src="{{ url_for('static', filename='js/easter-eggs.js') }}"></script>
    <script src="{{ url_for('static', filename='js/questions.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tasks.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cards.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bosses.js') }}"></script>
    <script src="{{ url_for('static', filename='js/guru.js') }}"></script>
</body>
</html>

